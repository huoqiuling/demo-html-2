name: ä¸»å·¥ä½œæµ

on:
  push:
    branches: [main]
    # paths:
    #   - "targetDir/**"

jobs:
  main-job:
    runs-on: ubuntu-latest
    env:
      _var_job_name: main-job
      _var_job_desc: ä¸€äº›æè¿°
    strategy:
      matrix:
        node: [16, 18]
        os: [ubuntu-latest, windows-latest]
    steps:
      - name: step1 è¾“å‡ºç³»ç»Ÿä¿¡æ¯
        run: uname -a
      - name: step2 è¾“å‡ºå·¥ä½œç›®å½•
        run: pwd
      - name: step3 è¾“å‡ºæ—¶é—´
        run: date
      - name: step4 è¾“å‡ºå…¨éƒ¨ç¯å¢ƒå˜é‡
        run: env
      - name: step5 è¾“å‡ºæŒ‡å®šç¯å¢ƒå˜é‡
        run: echo "$_var_job_name, $_var_job_desc"

  random:
    needs: main-job
    runs-on: ubuntu-latest
    steps:
      - name: ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œ1 æˆ– 0
        id: rand
        run: echo "value=$((RANDOM % 2))" >> $GITHUB_OUTPUT

      - name: Always run
        run: echo "æˆ‘ä¸€å®šä¼šæ‰§è¡Œ"

      - name: Run only if random=1
        if: steps.rand.outputs.value == '1'
        run: echo "ğŸ‰ éšæœºç»“æœæ˜¯ 1ï¼Œæ‰€ä»¥æˆ‘æ‰§è¡Œäº†"
