name: 主工作流

on:
  push:
    branches: [main]
    # paths:
    #   - "targetDir/**"

jobs:
  main-job:
    runs-on: ubuntu-latest
    env:
      _var_job_name: main-job
      _var_job_desc: 一些描述
    strategy:
      matrix:
        node: [16, 18]
        os: [ubuntu-latest, windows-latest]
    steps:
      - name: step1 输出系统信息
        run: uname -a
      - name: step2 输出工作目录
        run: pwd
      - name: step3 输出时间
        run: date
      - name: step4 输出全部环境变量
        run: env
      - name: step5 输出指定环境变量
        run: echo "$_var_job_name, $_var_job_desc"

  random-job:
    needs: main-job
    runs-on: ubuntu-latest
    steps:
      - name: 生成一个随机数，1 或 0，保存到环境变量 _var_random
        run: echo "_var_random=$((RANDOM % 2))" >> $GITHUB_ENV
      - name: 查看环境变量
        run: env
